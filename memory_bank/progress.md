# Progress

## What works

*   Project structure is set up according to Cookiecutter Data Science template.
*   Basic path management in `bank_fraud/config.py` is established.
*   Data dictionary generation utility (`data_dictionary_generator.py`) is functional.
*   **Data ingestion and anonymization (`1.0-mjv-data-ingestion-and-anonymization.py`) is set up.**
*   **Data preparation, cleaning, and initial filtering (`2.0-mjv-data-preparation.py`, created as a placeholder) is set up.**
*   **Feature selection (IV and correlation analysis) and final feature dropping (`3.0-mjv-feature-selection-and-eda.py`) is set up, and the processed data is saved as `3.0_selected_features.parquet`.**
*   **Robust IV calculation for categorical and numerical features (with rounding for readability) is implemented, with detailed results saved to individual CSV files in `references/iv_details/`.**
*   **Dropped 30 columns based on IV calculation and feature selection criteria.**
*   **Plots generated by `2.0-mjv-data-preparation.py` and `3.0-mjv-feature-selection-and-eda.py` are now saved to `reports/figures/`.**
*   Memory Bank directory and all core files (`projectbrief.md`, `productContext.md`, `activeContext.md`, `systemPatterns.md`, `techContext.md`, `progress.md`) are created.
*   **`storytelling_with_data_principles.md` has been added to the Memory Bank, documenting key data visualization principles.**
*   `eda_checklist.md` has been moved to `notebooks/to_be_deleted/`.
*   Agent persona (expert data scientist) has been configured in `.cursorrules`.
*   New Jupyter Notebook workflow adopted: read `.ipynb`, edit `.py`.
*   **Numerical binning rules have been pre-processed and saved to `numerical_binning_rules_processed.csv` for optimized IV calculation.**
*   **Pre-processed numerical binning rules have been successfully integrated into the feature selection script, optimizing numerical IV calculation and addressing binning issues.**
*   **Refined numerical binning definitions in `bank_fraud/utils/numerical_binning_definitions.py` for improved interpretability and consistency.**
*   **Created `mask_iv_details.py` in `bank_fraud/utils/` for masking sensitive IV details, and added it to `.gitignore`.**
*   **Integrated `mask_iv_details.py` into `3.0-mjv-feature-selection-and-eda.py` to automatically mask sensitive categorical data in IV details CSVs after generation.**
*   **Completed correlation analysis for categorical and numerical features, dropped highly correlated numerical features, and refined the analysis and decision section.**
*   **Completed EDA on final features in `4.0-mjv-eda-final-features.ipynb`.**
*   **Completed two-stage hyperparameter tuning for both Precision and AUC-PR optimized XGBoost models.**
*   **The modeling script (`5.0-mjv-model-training-and-evaluation.py`) now includes robust, granular checkpoints for each tuning stage.**
*   **Completed evaluation of the final tuned models on the holdout set and conducted a cost-sensitive business simulation.**
*   **Documented the complete tuning and evaluation analysis within the modeling script.**
*   **Robust Business Simulation Script:** The business simulation in `5.0-mjv-model-training-and-evaluation.py` now saves its results, preventing the need to re-run the simulations.
*   **Completed SHAP analysis and created a dedicated interpretation report (`SHAP_Model_Interpretation.md`) in `reports/model_evaluation/`.**
*   **Initiated network analysis phase by creating the `6.0-mjv-network-analysis.ipynb` notebook.**

## What's left to build

*   **Complete Network Analysis:** Construct and analyze the transaction graph to identify fraud rings and patterns.
*   **Develop the final project report and presentation materials.**
*   **Create final, polished visualizations for reporting.**
*   **Automate Pipeline:** Create a comprehensive `Makefile` to run the entire data processing and modeling pipeline.

## Current status

*   **Setup Phase:** Complete.
*   **Data Understanding & Preparation:** Complete.
*   **Detailed EDA:** Complete.
*   **Modeling Phase:** Complete.
*   **Network Analysis Phase:** In progress.
*   **Reporting and Finalization Phase:** Pending completion of network analysis.

## Known issues

*   Initial `mkdir` command failed on Windows (resolved by implicit directory creation with `write_file`).
*   Discrepancy between `config.py`'s `DATA_DICTIONARIES_DIR` and actual file placement (resolved by adjusting `config.py`).
*   Persistent issues with direct file deletion commands on Windows (resolved by manual deletion).
*   (Document any ongoing issues or bugs here)
